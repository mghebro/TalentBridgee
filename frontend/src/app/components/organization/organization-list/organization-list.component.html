<div class="organization-list-page">
  <div class="page-header">
    <div class="header-content">
      <h1>Organizations</h1>
      <p class="subtitle">Browse and discover organizations on our platform</p>
    </div>
    <button
      *ngIf="userCanManage() | async"
      nz-button
      nzType="primary"
      nzSize="large"
      (click)="openCreateModal()"
    >
      <span nz-icon nzType="plus" nzTheme="outline"></span>
      Create Organization
    </button>
  </div>

  <div class="content-section">
    <div class="loading-container" *ngIf="loading">
      <nz-spin nzSize="large"></nz-spin>
    </div>

    <nz-empty
      *ngIf="!loading && organizations.length === 0"
      nzNotFoundContent="No organizations found."
    ></nz-empty>

    <div class="organizations-grid" *ngIf="!loading && organizations.length > 0">
      <div class="org-card" *ngFor="let org of organizations">
        <div class="card-header">
          <nz-avatar
            [nzSize]="56"
            [nzSrc]="getLogoUrl(org.logoUrl)"
            [nzText]="org.name.charAt(0)"
            nzIcon="bank"
            nzShape="square"
            class="org-avatar"
          >
          </nz-avatar>
          <div class="org-info">
            <a [routerLink]="['/organizations', org.id]" class="org-name">{{ org.name }}</a>
            <span class="org-type">{{ org.typeName }}</span>
          </div>
        </div>
        <div class="card-body">
          <div class="info-row">
            <span nz-icon nzType="mail" nzTheme="outline"></span>
            <span>{{ org.contactEmail }}</span>
          </div>
          <div class="info-row" *ngIf="org.website">
            <span nz-icon nzType="global" nzTheme="outline"></span>
            <a [href]="org.website" target="_blank" rel="noopener noreferrer">{{ org.website }}</a>
          </div>
        </div>
        <div class="card-footer">
          <nz-tag [nzColor]="org.isActive ? 'green' : 'red'">{{
            org.isActive ? 'Active' : 'Inactive'
          }}</nz-tag>
          <div class="actions" *ngIf="userCanManage() | async">
            <button nz-button nzType="text" nzSize="small" (click)="openEditModal(org)">
              <span nz-icon nzType="edit" nzTheme="outline"></span>
            </button>
            <button
              nz-button
              nzType="text"
              nzSize="small"
              nzDanger
              nz-popconfirm
              nzPopconfirmTitle="Are you sure you want to delete this organization?"
              (nzOnConfirm)="deleteOrganization(org.id.toString())"
            >
              <span nz-icon nzType="delete" nzTheme="outline"></span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
