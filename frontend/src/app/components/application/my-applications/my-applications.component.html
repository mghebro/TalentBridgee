<div class="my-applications-container">
  <div class="page-header">
    <h1>My Applications</h1>
  </div>

  <div class="content-section">
    <nz-empty
      *ngIf="!isLoading && applications.length === 0"
      nzNotFoundContent="You haven't applied to any vacancies yet."
    ></nz-empty>

    <div class="applications-grid" *ngIf="!isLoading && applications.length > 0">
      <nz-card
        *ngFor="let application of applications"
        class="application-card"
        [routerLink]="['/vacancies', application.vacancyId]"
      >
        <div class="card-header">
          <h3 class="vacancy-title">{{ application.vacancyTitle }}</h3>
          <nz-tag [nzColor]="getStatusColor(application.status)">
            {{ getStatusText(application.status) }}
          </nz-tag>
        </div>

        <div class="card-body">
          <div class="info-row">
            <span nz-icon nzType="calendar" nzTheme="outline"></span>
            <span>Applied: {{ application.appliedAt | date : 'MMM d, yyyy' }}</span>
          </div>
          <div class="info-row" *ngIf="application.testAssignmentId">
            <span nz-icon nzType="file-text" nzTheme="outline"></span>
            <span>Test Status:</span>
            <nz-tag [nzColor]="getTestStatusColor(application.testAssignmentStatus)">
              {{ getTestStatusText(application.testAssignmentStatus) }}
            </nz-tag>
          </div>
        </div>

        <div class="card-footer">
          <span class="view-link">
            View Vacancy
            <span nz-icon nzType="arrow-right" nzTheme="outline"></span>
          </span>
        </div>
      </nz-card>
    </div>

    <div class="loading-container" *ngIf="isLoading">
      <nz-spin nzSize="large"></nz-spin>
    </div>
  </div>
</div>
