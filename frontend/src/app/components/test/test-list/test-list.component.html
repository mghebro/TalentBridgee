<div class="test-list-page">
  <div class="page-header">
    <div class="header-content">
      <h1>{{ isOrgAdmin ? 'Test Management' : 'My Assigned Tests' }}</h1>
      <p class="subtitle">
        {{
          isOrgAdmin ? 'Create and manage tests for your vacancies' : 'Complete your assigned tests'
        }}
      </p>
    </div>
    <button *ngIf="isOrgAdmin" nz-button nzType="primary" nzSize="large" routerLink="/tests/new">
      <span nz-icon nzType="plus" nzTheme="outline"></span>
      Create Test
    </button>
  </div>

  <div class="content-section">
    <div class="loading-container" *ngIf="isLoading">
      <nz-spin nzSize="large"></nz-spin>
    </div>

    <nz-empty
      *ngIf="!isLoading && tests.length === 0"
      [nzNotFoundContent]="
        isOrgAdmin ? 'No tests created yet. Create your first test!' : 'No tests assigned to you.'
      "
    >
    </nz-empty>

    <div class="tests-grid" *ngIf="!isLoading && tests.length > 0">
      <div class="test-card" *ngFor="let test of tests">
        <div class="card-header">
          <h3 class="test-title">{{ test.title }}</h3>
          <nz-tag [nzColor]="getDifficultyColor(test.difficulty)">{{ test.difficulty }}</nz-tag>
        </div>
        <p class="test-description">{{ test.description }}</p>
        <div class="test-meta">
          <div class="meta-item">
            <span nz-icon nzType="clock-circle" nzTheme="outline"></span>
            <span>{{ test.durationMinutes }} min</span>
          </div>
          <div class="meta-item">
            <span nz-icon nzType="file-text" nzTheme="outline"></span>
            <span>{{ test.questionCount || 0 }} questions</span>
          </div>
          <div class="meta-item">
            <span nz-icon nzType="check-circle" nzTheme="outline"></span>
            <span>Pass: {{ test.passingScore }}%</span>
          </div>
        </div>
        <div class="card-actions">
          <button
            *ngIf="isOrgAdmin"
            nz-button
            nzType="default"
            [routerLink]="['/tests/edit', test.id]"
          >
            <span nz-icon nzType="edit" nzTheme="outline"></span>
            Edit
          </button>
          <button *ngIf="!isOrgAdmin" nz-button nzType="primary" [routerLink]="['/tests', test.id]">
            <span nz-icon nzType="play-circle" nzTheme="outline"></span>
            Start Test
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
