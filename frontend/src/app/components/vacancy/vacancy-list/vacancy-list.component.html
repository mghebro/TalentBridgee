<div class="vacancy-page">
  <div class="hero-section">
    <div class="hero-content">
      <h1>Find Your Dream Job</h1>
      <p>Discover thousands of job opportunities with all the information you need.</p>
    </div>
  </div>

  <div class="search-section">
    <form (ngSubmit)="search()" class="search-form">
      <div class="search-grid">
        <div class="search-field main-search">
          <span nz-icon nzType="search" nzTheme="outline"></span>
          <input
            type="text"
            nz-input
            placeholder="Job title, keywords, or company"
            [(ngModel)]="filter.searchTerm"
            name="searchTerm"
          />
        </div>
        <div class="search-field">
          <span nz-icon nzType="environment" nzTheme="outline"></span>
          <input
            type="text"
            nz-input
            placeholder="City or location"
            [(ngModel)]="filter.location"
            name="location"
          />
        </div>
        <div class="search-field">
          <nz-select
            [(ngModel)]="filter.employmentType"
            name="employmentType"
            nzAllowClear
            nzPlaceHolder="Employment Type"
            [nzDropdownMatchSelectWidth]="false"
          >
            <nz-option
              *ngFor="let type of employmentTypes"
              [nzLabel]="type"
              [nzValue]="type"
            ></nz-option>
          </nz-select>
        </div>
        <button nz-button nzType="primary" type="submit" class="search-btn">
          <span nz-icon nzType="search"></span>
          Search Jobs
        </button>
      </div>
    </form>
  </div>

  <div class="results-section">
    <div class="results-header">
      <h2>{{ vacancies.length }} Jobs Found</h2>
      <div class="view-toggle">
        <button 
          nz-button 
          [nzType]="viewMode === 'grid' ? 'primary' : 'default'"
          (click)="viewMode = 'grid'"
        >
          <span nz-icon nzType="appstore" nzTheme="outline"></span>
        </button>
        <button 
          nz-button 
          [nzType]="viewMode === 'list' ? 'primary' : 'default'"
          (click)="viewMode = 'list'"
        >
          <span nz-icon nzType="bars" nzTheme="outline"></span>
        </button>
      </div>
    </div>

    <div class="vacancies-grid" *ngIf="viewMode === 'grid'">
      <div class="vacancy-card" *ngFor="let vacancy of vacancies" (click)="viewVacancy(vacancy)">
        <div class="card-header">
          <div class="org-logo">
            <nz-avatar 
              [nzSize]="48" 
              [nzSrc]="getLogoUrl(vacancy.organizationLogo)" 
              [nzText]="(vacancy.organizationName || 'O').charAt(0)"
              nzIcon="bank"
              nzShape="square">
            </nz-avatar>
          </div>
          <div class="job-meta">
            <span class="org-name">{{ vacancy.organizationName || 'Company' }}</span>
            <span class="post-date">{{ vacancy.createdAt | date:'MMM d' }}</span>
          </div>
        </div>
        <h3 class="job-title">{{ vacancy.title }}</h3>
        <div class="job-info">
          <span class="info-item">
            <span nz-icon nzType="environment" nzTheme="outline"></span>
            {{ vacancy.location }}
            <nz-tag *ngIf="vacancy.isRemote" nzColor="green">Remote</nz-tag>
          </span>
          <span class="info-item">
            <span nz-icon nzType="clock-circle" nzTheme="outline"></span>
            {{ vacancy.employmentTypeName || vacancy.employmentType }}
          </span>
        </div>
        <div class="job-tags">
          <nz-tag nzColor="blue">{{ vacancy.experienceLevelName || vacancy.experienceLevel }}</nz-tag>
          <nz-tag *ngIf="vacancy.salaryRange">{{ vacancy.salaryRange }}</nz-tag>
        </div>
        <div class="card-footer">
          <span class="deadline" *ngIf="vacancy.applicationDeadline">
            <span nz-icon nzType="calendar" nzTheme="outline"></span>
            Deadline: {{ vacancy.applicationDeadline | date:'MMM d, yyyy' }}
          </span>
          <button nz-button nzType="primary" nzSize="small" class="apply-btn">
            View Details
          </button>
        </div>
      </div>
    </div>

    <div class="vacancies-list" *ngIf="viewMode === 'list'">
      <div class="vacancy-list-item" *ngFor="let vacancy of vacancies" (click)="viewVacancy(vacancy)">
        <div class="item-logo">
          <nz-avatar 
            [nzSize]="56" 
            [nzSrc]="getLogoUrl(vacancy.organizationLogo)" 
            [nzText]="(vacancy.organizationName || 'O').charAt(0)"
            nzIcon="bank"
            nzShape="square">
          </nz-avatar>
        </div>
        <div class="item-content">
          <div class="item-header">
            <h3 class="job-title">{{ vacancy.title }}</h3>
            <span class="salary" *ngIf="vacancy.salaryRange">{{ vacancy.salaryRange }}</span>
          </div>
          <span class="org-name">{{ vacancy.organizationName || 'Company' }}</span>
          <div class="item-meta">
            <span class="meta-item">
              <span nz-icon nzType="environment" nzTheme="outline"></span>
              {{ vacancy.location }}
            </span>
            <span class="meta-item">
              <span nz-icon nzType="clock-circle" nzTheme="outline"></span>
              {{ vacancy.employmentTypeName || vacancy.employmentType }}
            </span>
            <span class="meta-item">
              <span nz-icon nzType="trophy" nzTheme="outline"></span>
              {{ vacancy.experienceLevelName || vacancy.experienceLevel }}
            </span>
            <nz-tag *ngIf="vacancy.isRemote" nzColor="green">Remote</nz-tag>
          </div>
        </div>
        <div class="item-actions">
          <span class="post-date">{{ vacancy.createdAt | date:'MMM d' }}</span>
          <button nz-button nzType="primary" class="apply-btn">Apply Now</button>
        </div>
      </div>
    </div>

    <nz-empty *ngIf="vacancies.length === 0" nzNotFoundContent="No vacancies found. Try adjusting your search."></nz-empty>
  </div>
</div>
